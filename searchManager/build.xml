<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<project name="SearchManagerBuilder"  basedir=".">

	<property environment="env"/>
    <property name="debuglevel" value="source,lines,vars"/>
	<property name="target" value="1.6"/>
	<property name="source" value="1.6"/>
	<property name="dependencies" value="../Dependencies"/>
	
	<!-- Define the properties used by the build -->
	<property name="conf.home" value="C:/home/solr/conf"/>
	<property name="resc.home" value="C:/home/solr/resources"/>
	<property name="util.home" value="C:/home/solr/utilities"/>
		
	 <!-- Define the CLASSPATH -->
	 <path id="compile.classpath">
	    <fileset dir="${dependencies}/lib">
	      <include name="*.jar"/>
	    </fileset>
	  	<fileset dir="${dependencies}/tomcat/lib">
	  	  <include name="*.jar"/>
	  	</fileset>
	 	<fileset dir="${dependencies}/wsclient/jar">
	 	  <include name="*.jar"/>
	    </fileset>
	 </path>
	<!--
	<target name="jar" description="JAR Java sources">
		<delete dir="${dependencies}/lib" />
	  	<delete dir="${dependencies}/searchmanager/jar" />
	  	<delete dir="${dependencies}/searchmanager/classes" />
		<mkdir dir="${dependencies}/lib" />
	  	<mkdir dir="${dependencies}/searchmanager/jar" />
	  	<mkdir dir="${dependencies}/searchmanager/classes" />
		<copy todir="${dependencies}/lib">
		  	 <fileset dir="${basedir}/WebContent/WEB-INF/lib" />
		</copy>
		<javac srcdir="${basedir}/src" destdir="${dependencies}/searchmanager/classes">
		    <classpath refid="compile.classpath"/>
		</javac>
	  	<jar destfile="${dependencies}/searchmanager/jar/searchManager.jar">
	  	  	<fileset dir="${dependencies}/searchmanager/classes">
	  	  	  	<include name="**/*.class"/> 
	  	  	</fileset>
	  	</jar>	
		<delete dir="${dependencies}/lib" />
	  	<delete dir="${dependencies}/searchmanager/classes" />
	</target>	
	
	-->
	
	<target name="jar" description="JAR Java sources">
			<delete dir="${dependencies}/searchmanager/jar" />
			<mkdir dir="${dependencies}/searchmanager/jar" />
		  	<jar destfile="${dependencies}/searchmanager/jar/searchManager.jar">
		  	  	<fileset dir="${basedir}/bin">
		  	  	  	<include name="**/*.class"/> 
		  	  	</fileset>
		  	</jar>	
	</target>	
	
	<target name="war" description="WAR Java sources">
			<ant target="jar" />
	  		<delete dir="${dependencies}/searchmanager/war" />
	  		<delete dir="${dependencies}/searchmanager/WebContent" />
	  		<mkdir dir="${dependencies}/searchmanager/war" />
	  		<mkdir dir="${dependencies}/searchmanager/WebContent" />
	  		<mkdir dir="${dependencies}/searchmanager/WebContent/WEB-INF/lib" />
	  	 	<copy todir="${dependencies}/searchmanager/WebContent">
	  	 		<fileset dir="${basedir}/WebContent" />
	  	    </copy>
	  		<copy todir="${dependencies}/searchmanager/WebContent/WEB-INF/lib">
	  	  	 	<fileset file="${dependencies}/searchmanager/jar/searchManager.jar" />
	  			<fileset file="${basedir}/WebContent/WEB-INF/lib/x">
	  			  	<include name="**/*.jar"/> 
	  			</fileset>
	  			<fileset file="${dependencies}/wsclient/jar/x">
	  				<include name="**/*.jar"/> 
	  			</fileset>
	  	  	</copy>
		
			<copy todir="${dependencies}/searchmanager/WebContent/WEB-INF/classes">
				<fileset file="${basedir}/src/x">
					<include name="**/*.properties"/> 
					<include name="**/*.txt"/> 
					<include name="**/*.xml"/> 
					<include name="**/*.log"/> 
				</fileset>
			</copy>
		
			<war destfile="${dependencies}/searchmanager/war/searchManager.war">
				<fileset dir="${dependencies}/searchmanager/WebContent" />
			</war>
	  		<delete dir="${dependencies}/searchmanager/WebContent" />	
	  </target>
	
	  <target name="config" description="Deploy config files">
	  		<mkdir dir="${conf.home}" />
	  		<copy todir="${conf.home}">
	  	  	 	<fileset dir="${basedir}/config" />
	  	  	</copy>
	  </target>
	  <target name="resources" description="Deploy resources files">
	  		<mkdir dir="${resc.home}" />
	  		<copy todir="${resc.home}">
	  	  	 	<fileset dir="${basedir}/resources" />
	  	  	</copy>
	  </target>
	  <target name="utilities" description="Deploy utility files">
		  		<mkdir dir="${util.home}" />
		  		<copy todir="${util.home}">
		  	  	 	<fileset dir="${basedir}/utilities" />
		  	  	</copy>
	  </target>
</project> 